# JSON 输入结构说明（基于 `test/data1/pigNew.json`）

## 根对象
- 顶层是一个 JSON 对象，包含三个并列数组：`edge`、`phases`、`vertex`。
- 所有跨字段的引用均使用 0-based 下标。

## `edge` 数组（曲线）
每一项表示一条复合三阶 Bezier 曲线：
- `bezier`: 列表，内部每个元素是长度为 4 的控制点数组 `[[x0, y0], [x1, y1], [x2, y2], [x3, y3]]`。同一项内的多段曲线首尾相接，首点对应 `v1`，末点对应 `v2`。示例（节选）：
  ```json
  {
    "bezier": [
      [[519.41, 0.41], [518.21, 0.55], [516.99, 0.67], [515.79, 0.79]],
      [[515.79, 0.79], [513.97, 0.96], [512.15, 1.13], [510.34, 1.34]]
    ],
    "idx": 0,
    "v1": 0,
    "v2": 1
  }
  ```
- `v1`, `v2`: 整数，指向 `vertex` 中的起止点下标。
- `idx`: 整数，同一对 `v1`/`v2` 之间可能有多条曲线，用 `idx` 区分。

## `phases` 数组（闭合面）
每一项描述一个由边界顶点序列围成的面片：
- `boundaryEdge`: 顶点下标序列。通常首尾重复形成闭合（如 `[0, 1, 2, 0]`），也可能出现长度为 2 的自闭合（如 `[10, 10]` 表示单点环）。
- `color`: `[r, g, b]`，0–255 的整数。相同颜色可视为同一大结构。
- `edgeIdx`: 与 `boundaryEdge` 中连续顶点对一一对应，表示从 `boundaryEdge[i]` 指向 `boundaryEdge[i+1]` 所采用的曲线的 `idx`。例如第一项：
  ```json
  {
    "boundaryEdge": [0, 1, 2, 0],
    "color": [255, 255, 255],
    "edgeIdx": [0, 0, 0]
  }
  ```
  代表边段 (0→1)、(1→2)、(2→0) 均选用对应 `edge` 中 `idx = 0` 的曲线。

## `vertex` 数组（顶点）
每一项描述一个坐标点及其光滑性约束：
- `p`: `[x, y]`，浮点坐标。
- `smoothnessIndicator`: `null` 或列表。列表中的每个元素是长度为 2 的数组，分别给出需要在该顶点保持 G1/C1 光滑的两条曲线引用：
  ```json
  [
    { "idx": 0, "v1": 0, "v2": 1 },
    { "idx": 0, "v1": 0, "v2": 3 }
  ]
  ```
  两条曲线的 `v1`/`v2` 至少有一端等于当前顶点下标。如果为 `null`，表示该顶点没有光滑性约束。

## 解析要点
- 解析顺序建议：先读入 `vertex` 获取坐标，再加载 `edge` 以便通过 `(v1, v2, idx)` 定位曲线，最后解析 `phases` 以重建拓扑。
- `edgeIdx` 与 `boundaryEdge` 的长度关系：当 `boundaryEdge` 长度为 `n` 时，`edgeIdx` 应为 `n-1`（首尾闭合）或与顶点对数量一致。
- 数值均为浮点或整数，未发现额外元数据字段；遇到未知字段可保持透传以兼容未来扩展。
